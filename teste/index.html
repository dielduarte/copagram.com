<html>
	<head>
		<title>Teste usando Instagram</title>

		
		<style type="text/css">
			
			.insta-img{
				width: 200px;
				height: 200px;
				margin: 0 auto;
			}

			img[class*="loader-"]{
				display: none;
			}

		</style>
		
		<!-- Bibliotecas usadas -->
		<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
		<script src="http://code.stephenmorley.org/javascript/queues/Queue.js"></script>
		
		<script type="text/javascript">

		var settings = {
				hashtags: "bacon",
				client_id: "a2b4e3e7da704010a5d87416baec426e",
				images_to_fetch: 18,
				fetch_time: 10,
				display_time: 10
		}

		var queue = new Queue();

		function Enqueue()
		{
				$.ajax({
					type: 'GET',
					dataType: 'jsonp',
					url: "https://api.instagram.com/v1/tags/" + settings.hashtags + "/media/recent",
					data: {
						access_token: null,
						client_id: settings.client_id,
						count: settings.images_to_fetch
					},
					success: function(dados) {
						
						var fotos = dados.data;


						for (var i = 0; i < 18; i++) {

							var foto = fotos[i];

							var img = foto.images.standard_resolution.url;
							//var com = foto.caption.text;
							var user = foto.user.username;

							queue.enqueue({img: img, user: user});
						}
					}
				});

				setTimeout(function() {
			        Enqueue();
			    }, settings.fetch_time * 1000);
		}

		function showQueue()
		{
			if(!queue.isEmpty())
			{

				var imgs = new Array();

				for (var i = 0; i < settings.images_to_fetch; i++) {
					imgs[i] = queue.dequeue();
				}


							
				for (var i = 0; i < settings.images_to_fetch; i++) {
					
					var loader = '<img class="loader-'+i+'" >';

					var url = imgs[i].img;

					var id = "#" + i;

					
							//$(loader).attr('src', url).appendTo('body').load(function(){

				    			//$('id).fadeOut(600, function(){
				    				
				    				
				    				$(id).attr('src', url);


				    			//}).fadeIn();	

		
						//	});
					
				}

			}

			setTimeout(function() {
			        showQueue();
			    }, settings.display_time * 1000);
		}

		$(document).ready(function(){
			Enqueue();
			showQueue();
		});

		</script>
	
	</head>
	<body>

		
		<div class="insta-img" >
			<img  width="200px" height="200px" src="../src/img/teste.jpg" id="0">
		</div>

		<div class="insta-img" >
			<img src="" id="1">
		</div>

		<div class="insta-img" >
			<img src="" id="2">
		</div>


		<div class="insta-img" >
			<img src="" id="3">
		</div>

		<div class="insta-img" >
			<img src="" id="4">
		</div>

		<div class="insta-img" >
			<img src="" id="5">
		</div>


		<div class="insta-img" >
			<img src="" id="6">
		</div>

		<div class="insta-img" >
			<img src="" id="7">
		</div>

		<div class="insta-img" >
			<img src="" id="8">
		</div>


		<div class="insta-img" >
			<img src="" id="9">
		</div>

		<div class="insta-img" >
			<img src="" id="10">
		</div>

		<div class="insta-img" >
			<img src="" id="11">
		</div>


		<div class="insta-img" >
			<img src="" id="12">
		</div>

		<div class="insta-img" >
			<img src="" id="13">
		</div>

		<div class="insta-img" >
			<img src="" id="14">
		</div>


		<div class="insta-img" >
			<img src="" id="15">
		</div>

		<div class="insta-img" >
			<img src="" id="16">
		</div>

		<div class="insta-img" >
			<img src="" id="17">
		</div>
	</body>
</html>